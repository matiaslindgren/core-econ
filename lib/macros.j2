{% macro head(description, title) %}
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="{{ description }}">
  <title>{{ title }}</title>
{% endmacro %}

{% macro bokeh_lib(version) %}
  {% set deps = [
      'bokeh',
      'bokeh-widgets',
      'bokeh-tables',
      'bokeh-gl',
      'bokeh-mathjax',
    ]
  %}
  {% for dep in deps %}
    <script
        src="https://cdn.bokeh.org/bokeh/release/{{ dep }}-{{ version }}.min.js"
        crossorigin="anonymous">
    </script>
 {% endfor %}
{% endmacro %}

{% macro vega_lib() %}
  {% set deps = [
      'vega@5',
      'vega-lite@4',
      'vega-embed@6',
    ]
  %}
  {% for dep in deps %}
    <script src="https://cdn.jsdelivr.net/npm/{{ dep }}" crossorigin="anonymous">
    </script>
 {% endfor %}
{% endmacro %}

{% macro vega_embed() %}
  <div id="vis"></div>
  <script type="text/javascript">
    function loadJSON(id) {
      return JSON.parse(document.getElementById(id).innerHTML);
    }
    const spec = loadJSON("vega-data-spec");
    const options = loadJSON("vega-data-options");
    vegaEmbed("#vis", spec, options).then(() => {
        const bindings = document.querySelector("#vis.vega-embed form.vega-bindings");
        const canvas = document.querySelector("#vis.vega-embed canvas");
        canvas.parentNode.insertBefore(bindings, canvas);
    });
  </script>
{% endmacro %}
